# ALL
- Get your server secured (change user, add ssh key, avoid ssh passwords, avoid ssh root, set ufw up...)
  - Just run pi_secure_pt1.sh and pi_secure_pt2.sh, following instructions.

- wget https://github.com/rancher/k3s/releases/download/v0.1.0/k3s-armhf - check version first on https://github.com/rancher/k3s/releases
- sudo mv k3s-armhf /usr/local/bin/k3s
- sudo chmod +x /usr/local/bin/k3s
- vim /etc/hostname - change to master-01, node-14 ...whatever
- vim /etc/hosts - change '127.0.1.1 xxx' to '127.0.1.1 master-01' (or node-14 ...whatever)
- sudo vi /boot/cmdline.txt - add ' cgroup_enable=cpuset cgroup_memory=1 cgroup_enable=memory' at the end
- sudo init 6 - then log back in

# MASTER 1

- nohup sudo k3s server &
- add to .bashrc:
  alias kk='sudo k3s kubectl'
-  wait until it's done, then check /var/lib/rancher/k3s/server/node-token for the token

# MASTER 2(?)

# NODES
sudo k3s agent --server https://${MASTER_IP}:6443 --token ${NODE_TOKEN}

# TODO:
- Process/image that gets raspbian to a more secure status:
  - remove pi user
  - change ssh port
- Port forward the API to be accesible through kubectl from outside
  - generate tokens maybe?
